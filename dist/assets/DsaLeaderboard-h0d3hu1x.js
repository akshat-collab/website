import{r,j as e}from"./vendor-ui-CN8WKm1l.js";import{T as N,a as v,b as p,c as i,d as y,e as l}from"./table-fMONuI6t.js";import{P,a as T,b as d,c as k,d as C,e as S}from"./pagination-C-mxUv9H.js";import{h as L,o as D,T as E}from"./index-gDkUcazU.js";import{L as I}from"./loader-circle-B8r5uqUH.js";import"./vendor-react-Bte3Nn5F.js";const m=20;function F(){const{user:j}=L(),[a,c]=r.useState(1),[x,h]=r.useState([]),[u,f]=r.useState(!0);r.useEffect(()=>{fetch(D("/api/dsa/leaderboard?limit=200")).then(s=>s.ok?s.json():{items:[]}).then(s=>{const t=(s.items||[]).map((n,b)=>({rank:b+1,username:n.username,userId:n.id,rating:n.rating??1200,problemsSolved:n.problems_solved??0}));h(t)}).catch(()=>h([])).finally(()=>f(!1))},[]);const o=Math.ceil(x.length/m)||1,g=x.slice((a-1)*m,a*m);return e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"container max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Leaderboard"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-0.5",children:"Top users by rating. Filter by country (coming later)."})]})]}),e.jsx("div",{className:"rounded-md border",children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(I,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(N,{children:[e.jsx(v,{children:e.jsxs(p,{children:[e.jsx(i,{className:"w-20",children:"Rank"}),e.jsx(i,{children:"Username"}),e.jsx(i,{className:"text-right",children:"Rating"}),e.jsx(i,{className:"text-right",children:"Problems Solved"})]})}),e.jsx(y,{children:g.map(s=>{const t=j?.username===s.username;return e.jsxs(p,{className:t?"bg-primary/10 font-medium":"",children:[e.jsx(l,{children:e.jsxs("span",{className:s.rank<=3?"font-bold":"",children:["#",s.rank]})}),e.jsxs(l,{children:[s.username,t&&e.jsx("span",{className:"ml-2 text-xs text-primary",children:"(you)"})]}),e.jsx(l,{className:"text-right",children:s.rating}),e.jsx(l,{className:"text-right",children:s.problemsSolved})]},s.userId)})})]})}),o>1&&e.jsx(P,{children:e.jsxs(T,{children:[e.jsx(d,{children:e.jsx(k,{href:"#",onClick:s=>{s.preventDefault(),a>1&&c(a-1)},className:a<=1?"pointer-events-none opacity-50":""})}),e.jsx(d,{children:e.jsx(C,{href:"#",onClick:s=>{s.preventDefault(),c(1)},isActive:a===1,children:"1"})}),e.jsx(d,{children:e.jsx(S,{href:"#",onClick:s=>{s.preventDefault(),a<o&&c(a+1)},className:a>=o?"pointer-events-none opacity-50":""})})]})})]})})}export{F as default};
