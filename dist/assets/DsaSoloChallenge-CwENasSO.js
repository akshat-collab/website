import{r as l,j as e}from"./vendor-ui-CN8WKm1l.js";import{L as P}from"./vendor-react-Bte3Nn5F.js";import{g as te,a as ae,b as re,e as ne,F as le}from"./dsaTestCases-2DruH-_A.js";import{c as ie,u as x,d as p,T as oe,P as ce}from"./index-gDkUcazU.js";import{B as de}from"./badge-LuBAZkrR.js";import{C as J,c as U,a as me,b as ue}from"./card-BTQvvDTQ.js";import{S as xe,a as pe,b as he,c as fe,d as ge}from"./select-DoADUCMx.js";import{b as je,a as Ne}from"./questions-5cF6IRFd.js";import{g as be}from"./dsaProblems-Cqn1Y4EG.js";import{L as R}from"./loader-circle-B8r5uqUH.js";import{A as V}from"./arrow-left-Cpu3jsbt.js";import{T as ye}from"./timer-DKet9El8.js";import{C as Y}from"./circle-check-D_Vz31Q4.js";import{R as ve}from"./rotate-ccw-DZQtxq7N.js";import{S as Ce}from"./send-BSpR2Ay_.js";const _=ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),h={python:"# Your code",java:`class Solution {
    // Your code
}`,cpp:`class Solution {
public:
    // Your code
};`,c:"// Your code"};function Se(t,o){if(!t||!o.length)return null;const u=o[0]?.input,v=u&&typeof u=="object"&&!Array.isArray(u)?Object.keys(u):[];return{functionName:t.split("-").map((f,c)=>c===0?f:f.charAt(0).toUpperCase()+f.slice(1)).join(""),paramOrder:v}}function we(t){return Array.isArray(t)?t.map(o=>({input:o?.input,expected:o?.expected??o?.output})).filter(o=>o.input!==void 0):[]}const G=[{value:"python",label:"Python 3",monaco:"python"},{value:"java",label:"Java",monaco:"java"},{value:"cpp",label:"C++",monaco:"cpp"},{value:"c",label:"C",monaco:"c"}],Te=3;function Ue(){const[t,o]=l.useState(null),[u,v]=l.useState(!0),[C,f]=l.useState(null),[c,H]=l.useState("python"),[S,j]=l.useState(h.python),[O]=l.useState(Date.now()),[w,X]=l.useState(0),[d,q]=l.useState(!1),[Q,W]=l.useState(!1),[N,A]=l.useState("idle"),[m,T]=l.useState([]),[b,y]=l.useState("problem");l.useEffect(()=>{let s=!1;return(async()=>{try{try{const{slug:a}=await je();if(s)return;const{item:r}=await Ne(a);if(s)return;o(r)}catch{const a=be();if(a.length===0)throw new Error("No problems available.");const r=a[Math.floor(Math.random()*a.length)],L=te(r.id);o({id:r.id,title:r.title,difficulty:r.difficulty,acceptance:r.acceptance,tags:r.tags,description:r.description,examples:r.examples,constraints:r.constraints,testCases:L.map(i=>({input:i.input,expected:i.expected})),isPremium:!1,likes:0,dislikes:0})}s||j(h.python)}catch(a){s||f(a instanceof Error?a.message:"Failed to load problem")}finally{s||v(!1)}})(),()=>{s=!0}},[]),l.useEffect(()=>{t?.id&&c&&j(h[c]??h.python)},[c,t?.id]),l.useEffect(()=>{if(d)return;const s=setInterval(()=>X(Math.floor((Date.now()-O)/1e3)),1e3);return()=>clearInterval(s)},[d,O]);const k=t?we(t.testCases??[]):[],I=k.length>0,z=I?k.slice(0,Te):t?ae(t.id):[],B=I?k:t?re(t.id):[],$=l.useCallback(async s=>{if(!t)return;const a=s?B:z;if(a.length===0){x.error("No test cases available for this problem.");return}const r=a.map(i=>({input:i.input,expected:i.expected})),L=Se(t.id,r);A(s?"submitting":"running"),T([]),y("results");try{const i=await ne(S,c,r,s,L??void 0),se=i.results.map((n,g)=>({id:g+1,input:typeof n.input=="object"?JSON.stringify(n.input):String(n.input),expectedOutput:typeof n.expected=="object"?JSON.stringify(n.expected):String(n.expected),userOutput:typeof n.actual=="object"?JSON.stringify(n.actual):String(n.actual??""),passed:n.passed,executionTime:n.executionTime,error:n.error}));T(se);const M=i.overallStatus==="success";if(s&&M)q(!0),W(!0),x.success("All test cases passed! Challenge complete.");else if(i.overallStatus==="compilation_error"||i.overallStatus==="runtime_error")x.error(i.complexity?.analysis??"Compilation or runtime error.");else if(M){const n=i.results.filter(g=>g.passed).length;x.success(`${n}/${i.results.length} sample test cases passed. Submit to check all.`)}else{const n=i.results.filter(g=>g.passed).length;x.error(`${n}/${i.results.length} test cases passed.`)}}catch{x.error("Execution failed. Is the backend running on port 3001?")}finally{A("idle")}},[t,S,c,z,B]),K=()=>{j(h[c]??h.python),T([]),y("problem")},D=s=>{const a=Math.floor(s/60),r=s%60;return`${a}:${String(r).padStart(2,"0")}`},E=m.filter(s=>s.passed).length,Z=d?Math.max(0,1e3-w*2+(t?.difficulty==="Hard"?200:t?.difficulty==="Medium"?100:0)):0;if(u)return e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(R,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading challenge..."})]})});if(C||!t)return e.jsxs("div",{className:"flex-1 p-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(p,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(P,{to:"/dsa/duels",className:"gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Back"]})})}),e.jsx(J,{className:"mt-4 border-destructive/50",children:e.jsxs(U,{className:"pt-6",children:[e.jsx("p",{className:"text-destructive",children:C??"Problem not found."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ensure the backend is running and the DB is seeded."})]})})]});const ee=t.examples??[],F=t.constraints??[];return e.jsxs("div",{className:"flex-1 flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 px-4 py-2 border-b bg-background/80 shrink-0 flex-wrap",children:[e.jsx(p,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(P,{to:"/dsa/duels",className:"gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),"Back"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{variant:"secondary",children:t.difficulty}),e.jsx("span",{className:"font-semibold text-sm truncate max-w-[200px]",children:t.title})]}),e.jsxs("span",{className:"font-mono text-sm flex items-center gap-1 ml-auto",children:[e.jsx(ye,{className:"h-4 w-4 text-primary"}),D(w)]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-[40%] min-w-[300px] border-r flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex border-b shrink-0",children:[e.jsx("button",{onClick:()=>y("problem"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${b==="problem"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"}`,children:"Problem"}),e.jsxs("button",{onClick:()=>y("results"),className:`flex-1 px-4 py-2 text-sm font-medium transition-colors ${b==="results"?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"}`,children:["Results ",m.length>0&&`(${E}/${m.length})`]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[b==="problem"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:t.title}),e.jsx("p",{className:"whitespace-pre-wrap text-muted-foreground text-sm leading-relaxed",children:t.description}),ee.map((s,a)=>e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 space-y-1",children:[e.jsxs("p",{className:"text-xs font-semibold text-muted-foreground",children:["Example ",a+1]}),e.jsxs("p",{className:"font-mono text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Input:"})," ",s.input]}),e.jsxs("p",{className:"font-mono text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Output:"})," ",s.output]}),s.explanation&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Explanation: ",s.explanation]})]},a)),F.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-1",children:"Constraints:"}),e.jsx("ul",{className:"list-disc list-inside text-xs text-muted-foreground space-y-0.5",children:F.map((s,a)=>e.jsx("li",{className:"font-mono",children:s},a))})]})]}),b==="results"&&e.jsxs("div",{className:"space-y-3",children:[m.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Run or submit your code to see results here."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E===m.length?e.jsx(Y,{className:"h-5 w-5 text-green-500"}):e.jsx(_,{className:"h-5 w-5 text-red-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[E,"/",m.length," passed"]})]}),m.map(s=>e.jsxs("div",{className:`rounded-lg border p-3 space-y-1 ${s.passed?"border-green-500/30 bg-green-500/5":"border-red-500/30 bg-red-500/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.passed?e.jsx(Y,{className:"h-4 w-4 text-green-500"}):e.jsx(_,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{className:"text-sm font-medium",children:["Case ",s.id,": ",s.passed?"Passed":"Failed"]}),s.executionTime!==void 0&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-auto",children:[s.executionTime,"ms"]})]}),!s.passed&&e.jsxs("div",{className:"text-xs font-mono space-y-1 mt-2 pl-6",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Input:"})," ",s.input]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Expected:"})," ",s.expectedOutput]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Got:"})," ",s.error||s.userOutput]})]})]},s.id))]}),Q&&d&&e.jsxs(J,{className:"border-primary/30 bg-primary/5 mt-4",children:[e.jsx(me,{className:"pb-2",children:e.jsxs(ue,{className:"flex items-center gap-2 text-base",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),"Challenge Complete!"]})}),e.jsxs(U,{children:[e.jsxs("p",{className:"text-muted-foreground text-sm",children:["Time: ",e.jsx("strong",{className:"text-foreground",children:D(w)})," Â· ","Score: ",e.jsx("strong",{className:"text-foreground",children:Z})]}),e.jsx(p,{asChild:!0,className:"mt-3",size:"sm",children:e.jsx(P,{to:"/dsa/duels",children:"Try another"})})]})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b bg-muted/30 shrink-0",children:[e.jsxs(xe,{value:c,onValueChange:H,children:[e.jsx(pe,{className:"w-[130px] h-8 text-xs",children:e.jsx(he,{})}),e.jsx(fe,{children:G.map(s=>e.jsx(ge,{value:s.value,children:s.label},s.value))})]}),e.jsxs(p,{variant:"ghost",size:"sm",onClick:K,className:"h-8 gap-1 text-xs",children:[e.jsx(ve,{className:"h-3 w-3"}),"Reset"]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsxs(p,{size:"sm",variant:"outline",onClick:()=>$(!1),disabled:N!=="idle"||d,className:"h-8 gap-1 text-xs",children:[N==="running"?e.jsx(R,{className:"h-3 w-3 animate-spin"}):e.jsx(ce,{className:"h-3 w-3"}),"Run"]}),e.jsxs(p,{size:"sm",onClick:()=>$(!0),disabled:N!=="idle"||d,className:"h-8 gap-1 text-xs",children:[N==="submitting"?e.jsx(R,{className:"h-3 w-3 animate-spin"}):e.jsx(Ce,{className:"h-3 w-3"}),"Submit"]})]})]}),e.jsx("div",{className:"flex-1",children:e.jsx(le,{height:"100%",language:G.find(s=>s.value===c)?.monaco??"python",value:S,onChange:s=>j(s??""),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,wordWrap:"on",tabSize:4,automaticLayout:!0,readOnly:d,padding:{top:12}}})})]})]})]})}export{Ue as default};
