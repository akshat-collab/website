import{r as c,j as s}from"./vendor-ui-CN8WKm1l.js";import{d as b}from"./index-gDkUcazU.js";import{S as ue,a as me,b as fe,c as ge,d as G}from"./select-DoADUCMx.js";import{a as ye}from"./vendor-react-Bte3Nn5F.js";import{A as be}from"./arrow-left-Cpu3jsbt.js";const H=["code","type","fast","key","run","test","bug","fix","app","web","dev","api","css","html","json","loop","func","var","let","const"],de=["function","variable","constant","boolean","string","number","object","array","method","class","import","export","return","async","await","promise","callback","closure","scope","module"],pe=["algorithm","recursion","iteration","polymorphism","encapsulation","inheritance","abstraction","interface","implementation","optimization","refactoring","debugging","deployment","architecture","framework"];function Se({difficulty:p}={}){const he=ye(),E=c.useRef(null),[h,g]=c.useState("menu"),[f,xe]=c.useState("classic"),[Y,O]=c.useState(0),[K,X]=c.useState(0),[_,V]=c.useState(100),[R,$]=c.useState(0),[ve,q]=c.useState(0),[U,T]=c.useState(100),[A,v]=c.useState(""),d=c.useRef([]),F=c.useRef([]),w=c.useRef([]),B=c.useRef([]),W=c.useRef(),J=c.useRef(0),D=c.useRef(0),j=c.useRef(1),z=c.useRef(0),I=c.useRef(0),Q=c.useRef(0),Z=c.useRef(0),C=c.useRef(!1),N=c.useRef({x:0,y:0,width:0,height:0});c.useEffect(()=>{if(B.current.length===0)for(let n=0;n<100;n++)B.current.push({x:Math.random()*2e3,y:Math.random()*1e3,size:Math.random()*1.5+.5,opacity:Math.random()*.5+.2})},[]);const ee=c.useCallback(()=>{const n=j.current;let e=H;return p==="pro"||n>10?e=[...H,...de,...pe]:(p==="mid"||n>5)&&(e=[...H,...de]),e[Math.floor(Math.random()*e.length)]},[p]),te=c.useCallback((n,e,a,i)=>{for(let l=0;l<a;l++){const o=Math.PI*2*l/a,m=Math.random()*3+2;F.current.push({x:n,y:e,vx:Math.cos(o)*m,vy:Math.sin(o)*m,life:1,maxLife:1,color:i})}},[]),se=c.useCallback((n,e)=>{const a=N.current,i=a.x+a.width/2,l=a.y+a.height-40;w.current.push({id:Z.current++,x:i,y:l,targetX:n,targetY:e,progress:0,color:"#00C2FF"})},[]),re=c.useCallback(()=>{if(!E.current)return;const e=N.current,a=ee(),i=40+a.length*5,l=e.x+i+Math.random()*(e.width-i*2),o=.3+j.current*.05,m=f==="speed"?1.5:1,r={id:Q.current++,word:a,x:l,y:e.y+i,vx:(Math.random()-.5)*.5,vy:o*m,size:i,progress:0,shaking:!1,crackLevel:0,isActive:!1};d.current.push(r),d.current.some(y=>y.isActive)||(r.isActive=!0)},[f,ee]),ne=c.useCallback(n=>{if(te(n.x,n.y,12,"#00C2FF"),O(e=>e+n.word.length*10),$(e=>e+1),d.current=d.current.filter(e=>e.id!==n.id),d.current.length>0){const e=N.current,a=e.y+e.height-40;let i=d.current[0],l=Math.abs(i.y-a);for(const o of d.current){const m=Math.abs(o.y-a);m<l&&(l=m,i=o)}i.isActive=!0}},[te]),ce=c.useCallback(n=>{if(h!=="playing")return;z.current++;const e=A+n;v(e);const a=d.current.find(l=>l.isActive);a&&a.word.startsWith(e)?(I.current++,a.progress=e.length,a.crackLevel=e.length,se(a.x,a.y),e===a.word&&(ne(a),v(""))):(C.current=!0,setTimeout(()=>C.current=!1,200),a&&(a.shaking=!0,setTimeout(()=>a.shaking=!1,200)),f==="accuracy"&&T(l=>Math.max(0,l-10)),v(""));const i=z.current>0?Math.round(I.current/z.current*100):100;V(i)},[h,A,f,ne,se]),P=c.useCallback(()=>{g("playing"),O(0),X(0),V(100),$(0),q(0),T(100),v(""),d.current=[],F.current=[],w.current=[],J.current=Date.now(),D.current=Date.now(),j.current=p==="pro"?8:p==="mid"?4:1,z.current=0,I.current=0,Q.current=0,Z.current=0,C.current=!1},[]),ae=c.useCallback(()=>{g("gameover")},[]);return c.useEffect(()=>{const n=e=>{if(h==="menu"&&e.key==="Enter"){P();return}if(h==="playing"){if(e.key==="Escape"){g("paused");return}e.key.length===1&&/[a-z]/i.test(e.key)&&ce(e.key.toLowerCase())}h==="paused"&&e.key==="Escape"&&g("playing")};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[h,ce,P]),c.useEffect(()=>{if(h!=="playing")return;const n=E.current;if(!n)return;const e=n.getContext("2d");if(!e)return;const a=()=>{const l=n.getBoundingClientRect();n.width=l.width,n.height=l.height;const o=40,r=Math.min(l.width-o*2,(l.height-o*2)*.5625),y=l.height-o*2,S=(l.width-r)/2,k=o;N.current={x:S,y:k,width:r,height:y}};a(),window.addEventListener("resize",a);const i=()=>{const l=Date.now(),o=Math.floor((l-J.current)/1e3);if(q(o),o>0){const t=o/60,x=Math.round(R/t);X(x)}j.current=1+Math.floor(o/10);const m=Math.max(2e3-j.current*100,800);if(l-D.current>m){const t=f==="speed"?5:3;d.current.length<t&&(re(),D.current=l)}const r=N.current;d.current.forEach(t=>{t.x+=t.vx,t.y+=t.vy,t.x-t.size<r.x&&(t.x=r.x+t.size,t.vx=Math.abs(t.vx)*.8),t.x+t.size>r.x+r.width&&(t.x=r.x+r.width-t.size,t.vx=-Math.abs(t.vx)*.8),t.y+t.size>r.y+r.height&&(T(x=>{const u=Math.max(0,x-20);return u===0&&ae(),u}),d.current=d.current.filter(x=>x.id!==t.id),v(""),d.current.length>0&&t.isActive&&(d.current[0].isActive=!0))}),w.current=w.current.filter(t=>(t.progress+=.15,t.progress<1)),F.current=F.current.filter(t=>(t.x+=t.vx,t.y+=t.vy,t.life-=.02,t.life>0)),e.clearRect(0,0,n.width,n.height),e.fillStyle="#0B0F14",e.fillRect(0,0,n.width,n.height),e.strokeStyle="#00C2FF",e.lineWidth=2,e.shadowBlur=10,e.shadowColor="#00C2FF",e.strokeRect(r.x,r.y,r.width,r.height),e.shadowBlur=0,e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,n.width,r.y),e.fillRect(0,r.y,r.x,r.height),e.fillRect(r.x+r.width,r.y,n.width-r.x-r.width,r.height),e.fillRect(0,r.y+r.height,n.width,n.height-r.y-r.height),e.strokeStyle="rgba(0, 194, 255, 0.1)",e.lineWidth=1;const y=40;for(let t=r.x;t<r.x+r.width;t+=y)e.beginPath(),e.moveTo(t,r.y),e.lineTo(t,r.y+r.height),e.stroke();for(let t=r.y;t<r.y+r.height;t+=y)e.beginPath(),e.moveTo(r.x,t),e.lineTo(r.x+r.width,t),e.stroke();B.current.forEach(t=>{e.fillStyle=`rgba(255, 255, 255, ${t.opacity})`,e.fillRect(t.x%n.width,t.y%n.height,t.size,t.size)}),d.current.forEach(t=>{const x=t.shaking?(Math.random()-.5)*4:0,u=t.x+x,M=t.y+x;if(e.fillStyle=t.isActive?"#00C2FF":"#444",e.beginPath(),e.arc(u,M,t.size,0,Math.PI*2),e.fill(),t.crackLevel>0){e.strokeStyle="#00C2FF",e.lineWidth=2;for(let L=0;L<t.crackLevel;L++){const oe=Math.PI*2*L/t.word.length;e.beginPath(),e.moveTo(u,M),e.lineTo(u+Math.cos(oe)*t.size,M+Math.sin(oe)*t.size),e.stroke()}}e.fillStyle="#fff",e.font="16px monospace",e.textAlign="center",e.textBaseline="middle";const le=t.word.substring(0,t.progress),ie=t.word.substring(t.progress);e.fillStyle="#00C2FF",e.fillText(le,u-ie.length*4.5,M),e.fillStyle="#fff",e.fillText(ie,u+le.length*4.5,M)}),w.current.forEach(t=>{const x=t.x+(t.targetX-t.x)*t.progress,u=t.y+(t.targetY-t.y)*t.progress;e.strokeStyle=t.color,e.lineWidth=3,e.shadowBlur=10,e.shadowColor=t.color,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(x,u),e.stroke(),e.shadowBlur=0,e.fillStyle=t.color,e.beginPath(),e.arc(x,u,4,0,Math.PI*2),e.fill()});const S=r.x+r.width/2,k=r.y+r.height-40;e.fillStyle=C.current?"#FF0000":"#00C2FF",e.shadowBlur=15,e.shadowColor=C.current?"#FF0000":"#00C2FF",e.beginPath(),e.moveTo(S,k-15),e.lineTo(S-12,k+10),e.lineTo(S+12,k+10),e.closePath(),e.fill(),e.shadowBlur=0,F.current.forEach(t=>{e.fillStyle=t.color,e.globalAlpha=t.life,e.beginPath(),e.arc(t.x,t.y,2,0,Math.PI*2),e.fill(),e.globalAlpha=1}),W.current=requestAnimationFrame(i)};return i(),()=>{W.current&&cancelAnimationFrame(W.current),window.removeEventListener("resize",a)}},[h,f,R,re,ae]),s.jsxs("div",{className:"relative w-full h-full min-h-[600px] bg-[#0B0F14] flex flex-col items-center justify-center p-4",children:[s.jsx(b,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 z-20 text-gray-400 hover:text-[#00C2FF] hover:bg-[#00C2FF]/10",onClick:()=>he(-1),"aria-label":"Go back",children:s.jsx(be,{className:"h-5 w-5"})}),h==="menu"&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 bg-[#0B0F14]/95",children:[s.jsx("h1",{className:"text-5xl font-bold text-[#00C2FF] mb-4",children:"AstroType"}),s.jsx("p",{className:"text-gray-400 mb-8 text-center max-w-md",children:"Type words to destroy asteroids. Only the active asteroid (cyan) responds to your input."}),s.jsxs("div",{className:"mb-8",children:[s.jsx("label",{className:"text-gray-400 mb-2 block",children:"Game Mode"}),s.jsxs(ue,{value:f,onValueChange:n=>xe(n),children:[s.jsx(me,{className:"w-[200px] bg-[#1a1f2e] border-[#00C2FF]/30",children:s.jsx(fe,{})}),s.jsxs(ge,{children:[s.jsx(G,{value:"classic",children:"Classic"}),s.jsx(G,{value:"accuracy",children:"Accuracy Mode"}),s.jsx(G,{value:"speed",children:"Speed Mode"})]})]})]}),s.jsx(b,{onClick:P,className:"bg-[#00C2FF] hover:bg-[#00A8DD] text-black font-semibold px-8 py-6 text-lg",children:"Start Game (Press Enter)"}),s.jsxs("div",{className:"mt-8 text-sm text-gray-500 text-center max-w-md",children:[s.jsx("p",{children:"• Type the word shown on the active (cyan) asteroid"}),s.jsx("p",{children:"• Press ESC to pause"}),s.jsx("p",{children:"• Difficulty increases over time"})]})]}),h==="paused"&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 bg-[#0B0F14]/95",children:[s.jsx("h2",{className:"text-4xl font-bold text-[#00C2FF] mb-4",children:"Paused"}),s.jsx("p",{className:"text-gray-400 mb-8",children:"Press ESC to resume"}),s.jsx(b,{onClick:()=>g("playing"),className:"bg-[#00C2FF] hover:bg-[#00A8DD] text-black font-semibold px-8 py-4",children:"Resume"}),s.jsx(b,{onClick:()=>g("menu"),variant:"outline",className:"mt-4 border-[#00C2FF]/30 text-[#00C2FF] hover:bg-[#00C2FF]/10",children:"Main Menu"})]}),h==="gameover"&&s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 bg-[#0B0F14]/95",children:[s.jsx("h2",{className:"text-4xl font-bold text-[#00C2FF] mb-4",children:"Game Over"}),s.jsx("div",{className:"bg-[#1a1f2e] border border-[#00C2FF]/30 rounded-lg p-6 mb-8 min-w-[300px]",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400 text-sm",children:"Score"}),s.jsx("div",{className:"text-2xl font-bold text-[#00C2FF]",children:Y})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400 text-sm",children:"WPM"}),s.jsx("div",{className:"text-2xl font-bold text-[#00C2FF]",children:K})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400 text-sm",children:"Accuracy"}),s.jsxs("div",{className:"text-2xl font-bold text-[#00C2FF]",children:[_,"%"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400 text-sm",children:"Words"}),s.jsx("div",{className:"text-2xl font-bold text-[#00C2FF]",children:R})]})]})}),s.jsx(b,{onClick:P,className:"bg-[#00C2FF] hover:bg-[#00A8DD] text-black font-semibold px-8 py-4 mb-4",children:"Play Again"}),s.jsx(b,{onClick:()=>g("menu"),variant:"outline",className:"border-[#00C2FF]/30 text-[#00C2FF] hover:bg-[#00C2FF]/10",children:"Main Menu"})]}),h==="playing"&&s.jsxs("div",{className:"absolute top-4 left-14 right-4 flex justify-between items-start z-10 pointer-events-none",children:[s.jsxs("div",{className:"bg-[#1a1f2e]/90 border border-[#00C2FF]/30 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Mode"}),s.jsx("div",{className:"text-sm font-semibold text-[#00C2FF] capitalize",children:f})]}),s.jsx("div",{className:"bg-[#1a1f2e]/90 border border-[#00C2FF]/30 rounded-lg p-3 text-right",children:s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[s.jsx("div",{className:"text-gray-400",children:"Score:"}),s.jsx("div",{className:"text-[#00C2FF] font-semibold",children:Y}),s.jsx("div",{className:"text-gray-400",children:"WPM:"}),s.jsx("div",{className:"text-[#00C2FF] font-semibold",children:K}),s.jsx("div",{className:"text-gray-400",children:"Accuracy:"}),s.jsxs("div",{className:"text-[#00C2FF] font-semibold",children:[_,"%"]}),s.jsx("div",{className:"text-gray-400",children:"Words:"}),s.jsx("div",{className:"text-[#00C2FF] font-semibold",children:R})]})})]}),h==="playing"&&s.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-10 pointer-events-none",children:[s.jsxs("div",{className:"bg-[#1a1f2e]/90 border border-[#00C2FF]/30 rounded-lg p-3 mb-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-gray-400",children:"Health"}),s.jsxs("span",{className:"text-xs text-[#00C2FF] font-semibold",children:[U,"%"]})]}),s.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-[#00C2FF] to-[#00FFB3] transition-all duration-300",style:{width:`${U}%`}})})]}),A&&s.jsxs("div",{className:"bg-[#1a1f2e]/90 border border-[#00C2FF]/30 rounded-lg p-3 text-center",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Current Input"}),s.jsx("div",{className:"text-lg font-mono text-[#00C2FF] font-semibold",children:A})]})]}),s.jsx("canvas",{ref:E,className:"w-full h-full rounded-lg",style:{maxHeight:"calc(100vh - 200px)"}})]})}export{Se as A};
