import{r as a,j as e}from"./vendor-ui-CN8WKm1l.js";import{L as m}from"./vendor-react-Bte3Nn5F.js";import{d as o,A as M,T as R,u as z}from"./index-gDkUcazU.js";import{B as F}from"./badge-LuBAZkrR.js";import{C as x,c as u,a as g,b as y,d as O}from"./card-BTQvvDTQ.js";import{T as U}from"./textarea-DP-vkoB6.js";import{c as $,a as H}from"./questions-5cF6IRFd.js";import{g as Q}from"./dsaProblems-Cqn1Y4EG.js";import{L as W}from"./loader-circle-B8r5uqUH.js";import{A as N}from"./arrow-left-Cpu3jsbt.js";const w="// Your code";function se(){const[n,h]=a.useState(null),[b,v]=a.useState(!0),[p,C]=a.useState(null),[S,f]=a.useState(w),[j]=a.useState(Date.now()),[D,k]=a.useState(0),[i,E]=a.useState(!1),[L,T]=a.useState(!1);a.useEffect(()=>{let s=!1;return(async()=>{try{try{const{slug:t}=await $();if(s)return;const{item:l}=await H(t);if(s)return;h(l)}catch{const t=Q();if(t.length===0)throw new Error("No problems available.");const l=new Date().toDateString();let c=0;for(let d=0;d<l.length;d++)c=(c<<5)-c+l.charCodeAt(d);const r=t[Math.abs(c)%t.length];h({id:r.id,title:r.title,difficulty:r.difficulty,acceptance:r.acceptance,tags:r.tags,description:r.description,examples:r.examples,constraints:r.constraints,testCases:[],isPremium:!1,likes:0,dislikes:0})}s||f(w)}catch(t){s||C(t instanceof Error?t.message:"Failed to load daily problem")}finally{s||v(!1)}})(),()=>{s=!0}},[]),a.useEffect(()=>{if(i)return;const s=setInterval(()=>k(Math.floor((Date.now()-j)/1e3)),1e3);return()=>clearInterval(s)},[i,j]);const B=()=>{E(!0),T(!0),z.success("Daily challenge complete!")},A=s=>{const t=Math.floor(s/60),l=s%60;return`${t}:${String(l).padStart(2,"0")}`},I=new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});if(b)return e.jsx("div",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(W,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading today's challenge..."})]})});if(p||!n)return e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"container max-w-4xl mx-auto",children:[e.jsx(o,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(m,{to:"/dsa/duels",className:"gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"Back"]})}),e.jsx(x,{className:"mt-4 border-destructive/50",children:e.jsxs(u,{className:"pt-6",children:[e.jsx("p",{className:"text-destructive",children:p??"Problem not found."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ensure the backend is running and the DB is seeded."})]})})]})});const P=n.examples?.slice(0,2)??[];return e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"container max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(m,{to:"/dsa/duels",className:"gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"Back"]})}),e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(M,{className:"h-4 w-4"}),I]})]}),e.jsxs(x,{children:[e.jsxs(g,{children:[e.jsxs(y,{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsx("span",{children:"Daily Challenge"}),e.jsx(F,{variant:"secondary",children:n.difficulty})]}),e.jsx(O,{className:"text-muted-foreground",children:"Same problem for everyone today. Complete to appear on today's leaderboard (when backend is connected)."})]}),e.jsxs(u,{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:n.title}),e.jsx("p",{className:"whitespace-pre-wrap text-muted-foreground text-sm",children:n.description}),e.jsx("div",{className:"rounded bg-muted/50 p-3 font-mono text-sm",children:P.map((s,t)=>e.jsxs("div",{children:[e.jsx("strong",{children:"Input:"})," ",s.input," → ",e.jsx("strong",{children:"Output:"})," ",s.output]},t))}),e.jsx(U,{value:S,onChange:s=>f(s.target.value),className:"font-mono min-h-[140px]",placeholder:"Write your solution...",disabled:i}),i?e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Solved!"}):e.jsx(o,{onClick:B,children:"Submit solution"})]})]}),L&&e.jsxs(x,{className:"border-primary/30 bg-primary/5",children:[e.jsx(g,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-primary"}),"Daily challenge complete"]})}),e.jsxs(u,{children:[e.jsxs("p",{className:"text-muted-foreground",children:["Time: ",e.jsx("strong",{className:"text-foreground",children:A(D)})," · ","Today's rank will update when leaderboard is connected."]}),e.jsx(o,{asChild:!0,className:"mt-4",children:e.jsx(m,{to:"/dsa/duels",children:"Back to duels"})})]})]})]})})}export{se as default};
