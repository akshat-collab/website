import{r as o,j as e}from"./vendor-ui-CN8WKm1l.js";import{L as v}from"./vendor-react-Bte3Nn5F.js";import{C as m,a as x,b as h,d as p,c as u}from"./card-BTQvvDTQ.js";import{u as S}from"./useDuelUser-BgbJwH0j.js";import{b as N,g as k,a as C}from"./dsaActivityStore-C0uiOo-T.js";import{A as E,T as L}from"./index-gDkUcazU.js";import{F as A}from"./flame-BOwLSDc8.js";const F=7,b=12;function $(s){const r=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0");return`${r}-${n}-${l}`}function B(){const s=S(),[r,n]=o.useState(()=>N());o.useEffect(()=>{n(N())},[]);const{gridDates:l,currentStreak:j,longestStreak:g}=o.useMemo(()=>{const t=new Date;t.setHours(0,0,0,0);const a=F*b,y=[];let c=new Date(t);c.setDate(c.getDate()-a+1);for(let d=0;d<a;d++){const i=new Date(c);i.setDate(i.getDate()+d);const f=$(i);y.push({key:f,date:i,isActive:r.has(f)})}const D=k(),w=C();return{gridDates:y,currentStreak:D,longestStreak:w}},[r]);return s?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"container max-w-3xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Activity & Streak"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs(m,{children:[e.jsxs(x,{className:"pb-2",children:[e.jsxs(h,{className:"text-base flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-orange-500"}),"Current streak"]}),e.jsx(p,{children:"Consecutive days with at least one activity"})]}),e.jsx(u,{children:e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[j," day",j!==1?"s":""]})})]}),e.jsxs(m,{children:[e.jsxs(x,{className:"pb-2",children:[e.jsxs(h,{className:"text-base flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5 text-amber-500"}),"Longest streak"]}),e.jsx(p,{children:"Best consecutive days so far"})]}),e.jsx(u,{children:e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[g," day",g!==1?"s":""]})})]})]}),e.jsxs(m,{children:[e.jsxs(x,{children:[e.jsxs(h,{className:"text-lg",children:["Last ",b," weeks"]}),e.jsx(p,{children:"Each cell is a day. Filled = you had activity (solved a problem or submitted). Solve problems to build your streak."})]}),e.jsxs(u,{children:[e.jsx("div",{className:"flex gap-0.5 flex-wrap",style:{width:"min(100%, 420px)"},children:l.map(({key:t,isActive:a})=>e.jsx("div",{className:`w-3 h-3 rounded-sm flex-shrink-0 ${a?"bg-primary":"bg-muted"}`,title:t+(a?" (activity)":"")},t))}),e.jsxs("div",{className:"flex gap-4 mt-3 text-xs text-muted-foreground",children:[e.jsx("span",{children:"Less"}),e.jsxs("div",{className:"flex gap-0.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm bg-muted"}),e.jsx("div",{className:"w-3 h-3 rounded-sm bg-primary/50"}),e.jsx("div",{className:"w-3 h-3 rounded-sm bg-primary"})]}),e.jsx("span",{children:"More"})]})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Activity is recorded when you submit a solution on a problem page."," ",e.jsx(v,{to:"/dsa/problems",className:"text-primary hover:underline",children:"Go to Problems"})]})]})}):e.jsx("div",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Log in to view your activity calendar and streak."}),e.jsx(v,{to:"/dsa/login",className:"text-primary hover:underline font-medium",children:"Log in"})]})})}export{B as default};
