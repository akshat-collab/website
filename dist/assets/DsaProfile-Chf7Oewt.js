import{r as a,j as e}from"./vendor-ui-CN8WKm1l.js";import{L as C}from"./vendor-react-Bte3Nn5F.js";import{c as I,d as c,I as E,g as O,h as M,j as T,v as A,w as _,x as G,U as F,T as J,y as H,z as V,s as W}from"./index-gDkUcazU.js";import{C as N,a as b,b as v,d as y,c as k}from"./card-BTQvvDTQ.js";import{u as Y}from"./useDuelUser-BgbJwH0j.js";import{g as $}from"./duelRating-B28zpt2F.js";import{g as B,a as K}from"./dsaActivityStore-C0uiOo-T.js";import{T as U}from"./textarea-DP-vkoB6.js";import{S as Q}from"./sticky-note-oCAMg_zt.js";import{T as q}from"./trash-2-CgeUOR45.js";import{C as X}from"./camera-CoU7fvTc.js";import{F as Z}from"./flame-BOwLSDc8.js";import{L as ee}from"./log-in-0XNOnK8T.js";import{A as se}from"./activity-BMwr-OV0.js";const te=I("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),R="dsa_sticky_notes",D=["bg-yellow-100 dark:bg-yellow-500/20 border-yellow-300 dark:border-yellow-500/40","bg-cyan-100 dark:bg-cyan-500/20 border-cyan-300 dark:border-cyan-500/40","bg-pink-100 dark:bg-pink-500/20 border-pink-300 dark:border-pink-500/40","bg-green-100 dark:bg-green-500/20 border-green-300 dark:border-green-500/40","bg-amber-100 dark:bg-amber-500/20 border-amber-300 dark:border-amber-500/40"];function ae(){try{const t=localStorage.getItem(R);return t?JSON.parse(t):[]}catch{return[]}}function re(t){localStorage.setItem(R,JSON.stringify(t))}function le(){const[t,d]=a.useState(()=>ae()),[u,n]=a.useState(!1),[o,r]=a.useState(""),[m,f]=a.useState("");a.useEffect(()=>{re(t)},[t]);const p=a.useCallback(()=>{!o.trim()&&!m.trim()||(d(s=>[...s,{id:crypto.randomUUID(),title:o.trim()||"Note",content:m.trim(),color:D[s.length%D.length],createdAt:Date.now()}]),r(""),f(""),n(!1))},[o,m]),j=a.useCallback(s=>{d(l=>l.filter(h=>h.id!==s))},[]),g=a.useCallback((s,l)=>{d(h=>h.map(x=>x.id===s?{...x,...l}:x))},[]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-amber-500"}),"Sticky Notes"]}),u?null:e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>n(!0),children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"Add note"]})]}),u&&e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-2",children:[e.jsx(E,{placeholder:"Title",value:o,onChange:s=>r(s.target.value),className:"font-medium"}),e.jsx(U,{placeholder:"Write your note...",value:m,onChange:s=>f(s.target.value),rows:3,className:"resize-none"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{size:"sm",onClick:p,children:"Save"}),e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>n(!1),children:"Cancel"})]})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:t.map(s=>e.jsxs("div",{className:O("rounded-lg border p-4 shadow-sm min-h-[120px] flex flex-col",s.color),children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("input",{className:"font-semibold bg-transparent border-none outline-none w-full text-sm",value:s.title,onChange:l=>g(s.id,{title:l.target.value})}),e.jsx(c,{size:"icon",variant:"ghost",className:"h-7 w-7 shrink-0 text-muted-foreground hover:text-destructive",onClick:()=>j(s.id),children:e.jsx(q,{className:"h-3.5 w-3.5"})})]}),e.jsx(U,{className:"flex-1 min-h-[80px] resize-none bg-transparent border-none shadow-none p-0 text-sm focus-visible:ring-0",value:s.content,onChange:l=>g(s.id,{content:l.target.value}),placeholder:"Note content..."})]},s.id))}),t.length===0&&!u&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No sticky notes yet. Add one to get started."})]})}function ne(){const n=Math.floor(127.39999999999999);return e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Submission activity"}),e.jsx("div",{className:"flex gap-0.5 flex-wrap max-w-full",style:{width:"min(100%, 400px)"},children:Array.from({length:364}).map((o,r)=>e.jsx("div",{className:`w-2 h-2 rounded-sm ${r<n?"bg-primary/60":"bg-muted"}`,title:`${r<n?"1":"0"} submission`},r))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Less → More"})]})}function ve(){const t=Y(),{user:d,firebaseUser:u}=M(),[n,o]=a.useState(()=>T()),r=n||u?.photoURL||null,[m,f]=a.useState(()=>A()),p=a.useRef(null),j=B();K();const g=_(),s=$();a.useEffect(()=>{t&&G()},[t]),a.useEffect(()=>{o(T()),f(A())},[t?.id]);const l=i=>{const w=i.target.files?.[0];if(!w||!w.type.startsWith("image/"))return;const S=new FileReader;S.onload=()=>{const L=S.result;V(L),o(L)},S.readAsDataURL(w),i.target.value=""},h=i=>{W(i),f(i)};if(!t)return e.jsx("div",{className:"flex-1 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Log in to view your profile and stats."}),e.jsx(c,{asChild:!0,children:e.jsx(C,{to:"/dsa/login",children:"Log in"})})]})});const x=d?.problemsSolved??d?.rating,z=(()=>{try{const i=localStorage.getItem("dsa_solved_problems");return i?JSON.parse(i).length:0}catch{return 0}})(),P=typeof x=="number"&&x>0?x:z;return e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"container max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-6 flex-wrap",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"h-24 w-24 rounded-full overflow-hidden border-2 border-border bg-muted flex items-center justify-center shrink-0",children:r?e.jsx("img",{src:r,alt:"Profile",className:"h-full w-full object-cover"}):e.jsx(F,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("button",{type:"button",onClick:()=>p.current?.click(),className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(X,{className:"h-8 w-8 text-white"})}),e.jsx("input",{ref:p,type:"file",accept:"image/*",className:"hidden",onChange:l})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.username}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t.email}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1 text-orange-600 dark:text-orange-400",children:[e.jsx(Z,{className:"h-4 w-4"}),j," day solve streak"]}),e.jsxs("span",{className:"flex items-center gap-1 text-primary",children:[e.jsx(ee,{className:"h-4 w-4"}),g," day login streak"]}),e.jsx(C,{to:"/dsa/calendar",className:"text-primary hover:underline",children:"View calendar"})]})]})]}),e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsx(v,{className:"text-base",children:"Profile settings"}),e.jsx(y,{children:"Used for 1v1 duels: your opponent replies as the opposite gender (male → female name, female → male name). Set at login; change here if needed."})]}),e.jsx(k,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:m==="male"?"default":"outline",size:"sm",onClick:()=>h("male"),children:"Male"}),e.jsx(c,{variant:m==="female"?"default":"outline",size:"sm",onClick:()=>h("female"),children:"Female"})]})})]}),e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Stats & ranking"]}),e.jsx(y,{children:"Your 1v1 duel rank, practice streaks, and problem stats."})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(H,{className:"h-3.5 w-3.5"}),"1v1 Duel ranking"]}),e.jsx("p",{className:"text-xl font-bold tabular-nums mt-0.5",children:s})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Problems solved"}),e.jsx("p",{className:"text-xl font-bold tabular-nums mt-0.5",children:P})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Solve streak"}),e.jsxs("p",{className:"text-xl font-bold tabular-nums mt-0.5",children:[j," days"]})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Login streak"}),e.jsxs("p",{className:"text-xl font-bold tabular-nums mt-0.5",children:[g," days"]})]})]}),P>0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tracked from your practice on this device. Connect backend for full sync."})]})]}),e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Activity"]}),e.jsx(y,{children:"Solve problems to build your streak. View full calendar for details."})]}),e.jsxs(k,{children:[e.jsx(ne,{}),e.jsx(c,{variant:"outline",className:"mt-4",asChild:!0,children:e.jsx(C,{to:"/dsa/calendar",children:"Open Calendar & Streak"})})]})]}),e.jsxs(N,{children:[e.jsxs(b,{children:[e.jsx(v,{className:"text-base",children:"My Notes"}),e.jsx(y,{children:"Quick sticky notes. Stored on this device."})]}),e.jsx(k,{children:e.jsx(le,{})})]})]})})}export{ve as default};
