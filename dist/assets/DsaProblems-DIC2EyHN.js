import{r as x,j as e}from"./vendor-ui-CN8WKm1l.js";import{c as re,k as ae,f as oe,g as l,d as z,e as R,S as le,I as ne,l as ie}from"./index-gDkUcazU.js";import{T as q,a as de,b as K,c as y,d as ce,e as w}from"./table-fMONuI6t.js";import{f as me,D as ue}from"./questions-5cF6IRFd.js";import{g as xe}from"./dsaProblems-Cqn1Y4EG.js";import{a as he}from"./vendor-react-Bte3Nn5F.js";import{M as fe}from"./mic-Ch6e_nuq.js";import{C as be}from"./circle-check-D_Vz31Q4.js";import{S as pe}from"./star-CSsAXiGg.js";const ge=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function N(n){const{solvedProblems:i,difficultyStats:u}=n;if(i.length===0)return"beginner";const a=i.length,r=u.Hard/a*100,d=u.Medium/a*100;return u.Easy/a*100,a>=10&&r>=40||a>=20&&r>=30||a>=30&&d>=50?"advanced":a>=5&&(d>=30||r>=20)||a>=10&&d>=20?"intermediate":"beginner"}function Q(n){switch(n){case"beginner":return{Easy:70,Medium:25,Hard:5};case"intermediate":return{Easy:30,Medium:50,Hard:20};case"advanced":return{Easy:10,Medium:40,Hard:50}}}function ve(n,i){const u=new Map;return n.forEach(a=>{const r=i.find(d=>d.id===a);r&&r.tags.forEach(d=>{u.set(d,(u.get(d)||0)+1)})}),Array.from(u.entries()).sort((a,r)=>r[1]-a[1]).slice(0,5).map(([a])=>a)}function ye(n,i,u,a){let r=0;if(i.solvedProblems.includes(n.id))return-1e3;i.attemptedProblems.includes(n.id)&&(r-=50);const d=Q(u);n.difficulty==="Easy"?r+=d.Easy:n.difficulty==="Medium"?r+=d.Medium:n.difficulty==="Hard"&&(r+=d.Hard);const s=n.tags.filter(h=>a.includes(h));return r+=s.length*15,n.acceptance>=60?r+=10:n.acceptance>=40&&(r+=5),r+=Math.random()*10,r}function T(n,i,u=20){const a=N(i),r=ve(i.solvedProblems,n);return console.log("ðŸŽ¯ Recommendation Engine:",{skillLevel:a,totalSolved:i.solvedProblems.length,frequentTags:r,distribution:Q(a)}),n.map(s=>({problem:s,score:ye(s,i,a,r)})).filter(s=>s.score>0).sort((s,h)=>h.score-s.score).slice(0,u).map(s=>s.problem)}function F(n){const i=localStorage.getItem("dsa_solved_problems"),u=localStorage.getItem("dsa_attempted_problems"),a=i?JSON.parse(i):[],r=u?JSON.parse(u):[],d={Easy:0,Medium:0,Hard:0};return a.forEach(s=>{const h=n.find(k=>k.id===s);h&&d[h.difficulty]++}),{solvedProblems:a,attemptedProblems:r,difficultyStats:d}}function Me(){const n=he(),{search:i,setSearch:u,difficulty:a,status:r,tags:d}=ae(),{theme:s}=oe(),[h,k]=x.useState("Recommended"),[_,I]=x.useState(()=>{const t=localStorage.getItem("dsa_favorites");return t?new Set(JSON.parse(t)):new Set}),[b,A]=x.useState([]),[D,P]=x.useState([]),[U,H]=x.useState(!0),[J,E]=x.useState(null),[S,O]=x.useState(!1),[j,L]=x.useState("beginner"),[g,W]=x.useState(()=>{const t=localStorage.getItem("dsa_solved_problems");return t?new Set(JSON.parse(t)):new Set}),[M,$]=x.useState(()=>{const t=localStorage.getItem("dsa_attempted_problems");return t?new Set(JSON.parse(t)):new Set}),v=x.useCallback(async(t=!1)=>{try{H(!0),t&&E(null);const o=(await me()).items;A(o);const m=F(o),p=N(m);L(p);const f=T(o,m,50);P(f),E(null),O(!1)}catch(c){console.error("Failed to fetch problems:",c);const m=xe().map(f=>({id:f.id,title:f.title,difficulty:f.difficulty,acceptance:f.acceptance,tags:f.tags}));A(m);const p=F(m);L(N(p)),P(T(m,p,50)),O(!0),E(c instanceof ue?c.message:"Backend unavailable. Showing sample problems.")}finally{H(!1)}},[]);x.useEffect(()=>{v()},[v]),x.useEffect(()=>{if(!S)return;const t=()=>v(!0);return window.addEventListener("focus",t),()=>window.removeEventListener("focus",t)},[S,v]),x.useEffect(()=>{if(b.length>0){const t=F(b),c=N(t);L(c);const o=T(b,t,50);P(o)}},[g,M,b]),x.useEffect(()=>{const t=()=>{const c=localStorage.getItem("dsa_solved_problems");c&&W(new Set(JSON.parse(c)));const o=localStorage.getItem("dsa_attempted_problems");o&&$(new Set(JSON.parse(o)));const m=localStorage.getItem("dsa_favorites");m&&I(new Set(JSON.parse(m)))};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const Y=(t,c)=>{t.stopPropagation(),I(o=>{const m=new Set(o);return m.has(c)?m.delete(c):m.add(c),localStorage.setItem("dsa_favorites",JSON.stringify(Array.from(m))),m})},G=x.useMemo(()=>(h==="Recommended"?D:b).filter(o=>{const m=_.has(o.id),p=g.has(o.id),f=M.has(o.id),C=p?"solved":f?"attempted":"unsolved",X=!i||o.title.toLowerCase().includes(i.toLowerCase()),Z=a==="all"||o.difficulty===a,ee=r==="all"||r==="solved"&&C==="solved"||r==="unsolved"&&C==="unsolved"||r==="attempted"&&C==="attempted",te=d.length===0||d.some(se=>o.tags.includes(se));let B=!0;return h==="Favorite"&&(B=m),X&&Z&&ee&&te&&B}),[i,a,r,d,h,_,g,b,D]),V=t=>t==="Easy"?"text-green-400 bg-green-400/10 border-green-400/20":t==="Medium"?"text-yellow-400 bg-yellow-400/10 border-yellow-400/20":"text-red-400 bg-red-400/10 border-red-400/20";return U?e.jsx("div",{className:l("h-full flex items-center justify-center",s==="pastel"?"bg-transparent":"bg-white dark:bg-[#0B0F19]"),children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading problems..."})]})}):e.jsxs("div",{className:l("h-full flex flex-col overflow-hidden transition-colors duration-300",s==="pastel"?"bg-transparent":"bg-white dark:bg-[#0B0F19]"),children:[S&&J&&e.jsxs("div",{className:"shrink-0 bg-amber-500/15 border-b border-amber-500/30 px-4 py-2 flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[J," Showing sample problems. Start the server and database to see all questions."]}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>v(!0),className:"border-amber-500/50",children:"Retry"})]}),e.jsxs("div",{className:"shrink-0 p-6 pb-2 space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:l("text-3xl font-bold tracking-tight mb-1 transition-colors",s==="pastel"?"text-slate-800":"text-slate-900 dark:text-white"),children:"Problems"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S?"Search your practice problems here (sample list). Start server + DB for full list.":b.length>0?`Search your practice problems here. ${b.length.toLocaleString()} questions from database.`:"Search your practice problems here and get started."})]}),h==="Recommended"&&e.jsxs("div",{className:l("flex items-center gap-2 px-4 py-2 rounded-xl border transition-all",s==="pastel"?"bg-rose-50 border-rose-200":"bg-cyan-500/10 border-cyan-500/20"),children:[e.jsx(R,{className:l("h-4 w-4",s==="pastel"?"text-rose-500":"text-cyan-400")}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Skill Level: "}),e.jsx("span",{className:l("font-semibold capitalize",s==="pastel"?"text-rose-600":"text-cyan-400"),children:j})]}),e.jsxs("div",{className:"text-xs text-muted-foreground ml-2",children:["(",g.size," solved)"]})]})]}),e.jsx("div",{className:l("pt-4 flex items-center gap-6 border-b mt-2 transition-colors",s==="pastel"?"border-rose-100":"border-slate-200 dark:border-white/50"),children:["All Questions","Favorite Questions","Recommended"].map(t=>{const c=t.split(" ")[0],o=h===c;return e.jsxs("button",{onClick:()=>k(c),className:l("pb-2 text-sm font-medium transition-all relative flex items-center gap-2",o?s==="pastel"?"text-rose-600":"text-cyan-600 dark:text-cyan-400":l("text-muted-foreground",s==="pastel"?"hover:text-rose-900":"hover:text-slate-900 dark:hover:text-white")),children:[c==="Recommended"&&e.jsx(R,{className:"h-3.5 w-3.5"}),t,o&&e.jsx("div",{className:l("absolute bottom-0 left-0 w-full h-0.5 rounded-t-full",s==="pastel"?"bg-rose-500 shadow-[0_0_10px_rgba(244,63,94,0.5)]":"bg-cyan-500 shadow-[0_0_10px_rgba(34,211,238,0.5)]")})]},t)})}),h==="Recommended"&&e.jsxs("div",{className:l("mt-2 p-3 rounded-xl border text-sm flex items-start gap-3",s==="pastel"?"bg-rose-50/50 border-rose-200/50 text-rose-900":"bg-cyan-500/5 border-cyan-500/20 text-cyan-700 dark:text-cyan-300"),children:[e.jsx(R,{className:l("h-4 w-4 mt-0.5 shrink-0",s==="pastel"?"text-rose-500":"text-cyan-500")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"Smart Recommendations"}),e.jsxs("p",{className:"text-xs opacity-80",children:[j==="beginner"&&"Starting with easier problems to build your foundation. Keep solving to unlock harder challenges!",j==="intermediate"&&"Balanced mix of problems to strengthen your skills. You're making great progress!",j==="advanced"&&"Challenging problems tailored for your skill level. Keep pushing your limits!"]})]})]}),e.jsxs("div",{className:"relative group ",children:[e.jsx(le,{className:l("absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground transition-colors",s==="pastel"?"group-focus-within:text-rose-500":"group-focus-within:text-cyan-600 dark:group-focus-within:text-cyan-400")}),e.jsx(ne,{placeholder:"Search Problems",value:i,onChange:t=>u(t.target.value),className:l("pl-11 pr-10 h-10 border-[1.5px] rounded-xl transition-all text-sm",s==="pastel"?"bg-white border-rose-100 focus-visible:ring-rose-400/20 focus-visible:border-rose-400/50 text-slate-900 placeholder:text-muted-foreground/50":"bg-white dark:bg-[#111625] border-slate-200 dark:border-white/50 focus-visible:ring-cyan-500/20 focus-visible:border-cyan-500/50 text-slate-900 dark:text-white placeholder:text-muted-foreground/50")}),e.jsx(fe,{className:l("absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground cursor-pointer transition-colors",s==="pastel"?"hover:text-rose-600":"hover:text-slate-900 dark:hover:text-white")})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden px-6 pb-6",children:e.jsxs("div",{className:l("h-full rounded-2xl border-[1.5px] overflow-hidden flex flex-col",s==="pastel"?"border-rose-100 bg-white/60":"border-slate-200 dark:border-white/50 bg-slate-50 dark:bg-[#111625]/50"),children:[e.jsx("div",{className:l("border-[1.5px] backdrop-blur-sm z-10",s==="pastel"?"bg-white/80 border-rose-100":"bg-white/80 dark:bg-[#111625]/80 border-slate-200 dark:border-white/50"),children:e.jsx(q,{children:e.jsx(de,{children:e.jsxs(K,{className:"border-none hover:bg-transparent",children:[e.jsx(y,{className:"w-16 text-muted-foreground font-medium pl-6 text-xs h-10",children:"Status"}),e.jsx(y,{className:"w-[200px] text-muted-foreground font-medium text-xs h-10",children:"Title"}),e.jsx(y,{className:"w-40 pl-8 text-muted-foreground font-medium text-left text-xs h-10",children:"Difficulty Level"}),e.jsx(y,{className:"w-32 pl-8 text-left text-muted-foreground font-medium text-xs h-10",children:"Success Rate"}),e.jsx(y,{className:"w-32 text-right text-muted-foreground font-medium pr-10 text-xs h-10",children:"Action"})]})})})}),e.jsx(ie,{className:"flex-1 ",children:e.jsx(q,{children:e.jsx(ce,{children:G.map((t,c)=>{const o=_.has(t.id),m=g.has(t.id),p=M.has(t.id);return e.jsxs(K,{className:l("cursor-pointer border-[1.5px] transition-all duration-300 group h-12",s==="pastel"?"border-rose-50 hover:bg-rose-50 hover:border-l-4 hover:border-l-rose-400 hover:shadow-[0_0_20px_rgba(244,63,94,0.1)] border-l-2 border-l-transparent":"border-slate-200 dark:border-white/50 hover:bg-cyan-500/10 hover:border-l-4 hover:border-l-cyan-400 hover:shadow-[0_0_20px_rgba(34,211,238,0.1)] border-l-2 border-l-transparent dark:hover:bg-cyan-500/10"),onClick:()=>n(`/dsa/problem/${t.id}`),children:[e.jsx(w,{className:"pl-6 w-16 py-2",children:e.jsx("div",{className:"focus:outline-none pointer-events-none",children:m?e.jsx(be,{className:"h-4 w-4 text-green-500 fill-green-500/10"}):p?e.jsx("div",{className:"h-4 w-4 rounded-full bg-yellow-500/20 border-2 border-yellow-500 flex items-center justify-center",children:e.jsx(ge,{className:"h-2.5 w-2.5 text-yellow-500",strokeWidth:3})}):e.jsx("div",{className:l("h-4 w-4 rounded-full border-2 border-muted-foreground/30 transition-colors",s==="pastel"?"group-hover:border-rose-400/50":"group-hover:border-cyan-400/50")})})}),e.jsx(w,{className:"py-2 w-[90px]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:f=>Y(f,t.id),className:"focus:outline-none",children:e.jsx(pe,{className:l("h-3.5 w-3.5 transition-colors",o?"text-yellow-500 fill-yellow-500":"text-muted-foreground hover:text-yellow-500")})}),e.jsx("span",{className:l("font-medium text-sm transition-colors",s==="pastel"?"text-slate-700 group-hover:text-slate-900":"text-slate-700 dark:text-white/90 group-hover:text-slate-900 dark:group-hover:text-white"),children:t.title})]})}),e.jsx(w,{className:"text-center w-40 py-2",children:e.jsx("span",{className:l("inline-flex items-left gap-1.5 px-2 py-0.5 rounded-full text-[10px] uppercase font-bold border",V(t.difficulty)),children:t.difficulty==="Medium"?"Med.":t.difficulty})}),e.jsxs(w,{className:"text-center text-muted-foreground w-32 py-2 text-sm",children:[t.acceptance,"%"]}),e.jsx(w,{className:"text-right pr-6 w-32 py-2",children:e.jsx(z,{size:"sm",variant:"outline",className:l("h-7 text-xs px-3 rounded-full transition-all bg-transparent",s==="pastel"?"border-rose-200 text-rose-500 hover:bg-rose-400 hover:text-white":"border-cyan-500/20 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-400 hover:text-white dark:hover:text-[#0B0F19]"),children:"Solve"})})]},t.id)})})})})]})})]})}export{Me as default};
