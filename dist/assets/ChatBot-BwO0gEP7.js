import{r as s,j as e}from"./vendor-ui-CN8WKm1l.js";import{X as w}from"./index-gDkUcazU.js";import{S as j}from"./send-BSpR2Ay_.js";import"./vendor-react-Bte3Nn5F.js";const C=()=>{const[h,c]=s.useState(!1),[m,i]=s.useState([{from:"bot",text:"Hey there! ðŸ‘‹ I'm Nova, your TechMasterAI assistant!"},{from:"bot",text:"I know everything about TechMasterAI - our team, features, and mission. Ask me anything! ðŸš€"}]),[l,a]=s.useState(""),[d,b]=s.useState(!1),[f]=s.useState(()=>`session_${Date.now()}_${Math.random().toString(36).substring(2,9)}`),p=s.useRef(null),y=s.useRef(0);s.useEffect(()=>{const r=()=>c(!0);return window.addEventListener("open-chatbot",r),()=>window.removeEventListener("open-chatbot",r)},[]),s.useEffect(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[m]);const x=((r,t)=>(...o)=>{const n=Date.now();n-y.current>=t&&(y.current=n,r(...o))})(async()=>{if(!l.trim()||d)return;const r=l.trim();i(t=>[...t,{from:"user",text:r}]),a(""),b(!0);try{const t=m.slice(-5),o=await fetch("/.netlify/functions/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,sessionId:f,conversationHistory:t})}),n=await o.json();o.ok&&n.response?i(u=>[...u,{from:"bot",text:n.response,source:n.source||"api"}]):i(u=>[...u,{from:"bot",text:"I'm here to help! Try asking me about TechMasterAI, our features, team, or how to get started. What would you like to know? ðŸš€",source:"fallback"}])}catch{i(o=>[...o,{from:"bot",text:"I'm Nova from TechMasterAI! ðŸ¤– I'm having trouble connecting right now, but I'd love to help you learn about our competitive programming platform. Try asking me about our features or team!",source:"fallback"}])}finally{b(!1)}},500),g=r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),x())},v=r=>{switch(r){case"knowledge":return"ðŸ“š Knowledge Base";case"api":return"ðŸ¤– AI Assistant";case"fallback":return"ðŸ’¬ Assistant";default:return"ðŸ¤– AI Assistant"}};return e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:h?e.jsxs("div",{className:"w-80 h-96 glass-panel rounded-lg flex flex-col neon-border shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-primary/30 bg-gradient-to-r from-primary/10 to-secondary/10",children:[e.jsx("span",{className:"font-orbitron text-sm neon-text",children:"Nova"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-primary transition-colors hover:bg-primary/10 rounded p-1",style:{color:"#9CA3AF"},children:e.jsx(w,{size:18})})]}),e.jsx("div",{className:"px-3 py-2 border-b border-primary/30",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("button",{onClick:()=>a("What is TechMasterAI?"),className:"text-xs px-2 py-1 bg-primary/10 border border-primary/30 rounded text-primary hover:bg-primary/20 transition-colors",children:"About Us"}),e.jsx("button",{onClick:()=>a("Who is the founder?"),className:"text-xs px-2 py-1 bg-primary/10 border border-primary/30 rounded text-primary hover:bg-primary/20 transition-colors",children:"Founder"}),e.jsx("button",{onClick:()=>a("What features do you offer?"),className:"text-xs px-2 py-1 bg-primary/10 border border-primary/30 rounded text-primary hover:bg-primary/20 transition-colors",children:"Features"}),e.jsx("button",{onClick:()=>a("How can I join?"),className:"text-xs px-2 py-1 bg-primary/10 border border-primary/30 rounded text-primary hover:bg-primary/20 transition-colors",children:"Join Us"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[m.map((r,t)=>e.jsx("div",{className:`flex ${r.from==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] px-3 py-2 rounded-lg text-sm break-words ${r.from==="user"?"bg-primary/20 border border-primary/50 text-primary":"bg-secondary/20 border border-secondary/50 text-secondary"}`,children:[r.text,r.from==="bot"&&r.source&&e.jsx("div",{className:"text-xs opacity-40 mt-1",children:v(r.source)})]})},t)),d&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-secondary/20 border border-secondary/50 px-3 py-2 rounded-lg text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/loading.gif",alt:"Loading...",className:"w-8 h-6",style:{imageRendering:"auto",objectFit:"contain"},onError:r=>{r.currentTarget.style.display="none";const t=r.currentTarget.nextElementSibling;t&&(t.style.display="flex")}}),e.jsxs("div",{className:"hidden gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-secondary text-xs",children:"Nova is thinking..."})]})})}),e.jsx("div",{ref:p})]}),e.jsx("div",{className:"p-3 border-t border-primary/30 bg-gradient-to-r from-primary/5 to-secondary/5",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:r=>a(r.target.value),onKeyDown:g,placeholder:"Ask me anything...",disabled:d,className:"flex-1 cyber-input px-3 py-2 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed bg-foreground/5 border border-primary/30 focus:border-primary/60 focus:outline-none transition-colors"}),e.jsx("button",{onClick:x,disabled:d||!l.trim(),className:"p-2 bg-primary/20 border border-primary rounded hover:bg-primary/40 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(j,{size:16,className:"text-primary"})})]})})]}):e.jsxs("div",{className:"relative animate-float-gentle",children:[e.jsx("div",{className:"absolute -inset-2 w-24 h-24 rounded-full bg-gradient-to-r from-primary/20 to-secondary/20 animate-pulse-glow blur-md"}),e.jsx("div",{className:"absolute -inset-1 w-22 h-22 rounded-full bg-gradient-to-r from-primary/30 to-secondary/30 animate-pulse blur-sm"}),e.jsx("button",{onClick:()=>c(!0),className:"relative w-20 h-20 rounded-full bg-gradient-to-br from-primary/50 via-primary/40 to-secondary/50 border-2 border-primary/70 flex items-center justify-center hover:scale-110 hover:border-primary transition-all duration-300 p-2 shadow-2xl backdrop-blur-sm animate-chatbot-glow",style:{background:"radial-gradient(circle at 30% 30%, rgba(0, 194, 255, 0.6), rgba(0, 194, 255, 0.3), rgba(63, 188, 229, 0.4))",boxShadow:"0 0 30px rgba(0, 194, 255, 0.5), 0 0 60px rgba(0, 194, 255, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.1)"},children:e.jsx("div",{className:"relative w-16 h-16 rounded-full overflow-hidden border-2 border-white/30 shadow-inner",children:e.jsx("img",{src:"/loading.gif",alt:"Open Chat",className:"w-full h-full object-cover",style:{imageRendering:"auto",objectFit:"cover",filter:"brightness(1.1) contrast(1.1) saturate(1.1)"},onError:r=>{r.currentTarget.style.display="none";const t=r.currentTarget.parentElement;t&&(t.innerHTML=`
                      <div class="w-full h-full rounded-full bg-primary/30 border-2 border-primary/60 flex items-center justify-center">
                        <svg class="text-white" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                      </div>
                    `)}})})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-green-400 to-green-500 rounded-full border-2 border-white flex items-center justify-center animate-bounce shadow-lg",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]})})};export{C as default};
