import{r as p,j as e}from"./vendor-ui-CN8WKm1l.js";import{a as v,L as w}from"./vendor-react-Bte3Nn5F.js";import{u as S,F as L,a as n,b as t,c as o,d as i,e as c,t as F,o as I,f as C,s as h}from"./form-Brl-6CtM.js";import{h as E,I as g,d as j,s as G,u as f}from"./index-gDkUcazU.js";const k=I({email:h().min(1,"Email is required").email("Invalid email"),password:h().min(1,"Password is required"),gender:C(["male","female"],{required_error:"Select your gender"})});function A(){const d=v(),{login:y,loginWithGoogle:b}=E(),[r,m]=p.useState(!1),[u,x]=p.useState(!1),a=S({resolver:F(k),defaultValues:{email:"",password:"",gender:void 0}});async function N(s){m(!0);try{G(s.gender);const l=await y(s.email,s.password);l.success?(f.success("Logged in successfully"),d("/dsa/dashboard",{replace:!0})):f.error(l.error??"Login failed")}finally{m(!1)}}return e.jsx("div",{className:"flex flex-1 items-center justify-center p-6",children:e.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Log in"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Enter your email and password to access DSA Practice."}),e.jsx("p",{className:"text-xs text-muted-foreground/90",children:"One-time login only — each account can log in once."})]}),e.jsx(L,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(N),className:"space-y-4",children:[e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Email"}),e.jsx(i,{children:e.jsx(g,{type:"email",placeholder:"you@example.com",...s})}),e.jsx(c,{})]})}),e.jsx(n,{control:a.control,name:"password",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"Password"}),e.jsx(i,{children:e.jsx(g,{type:"password",placeholder:"••••••••",...s})}),e.jsx(c,{})]})}),e.jsx(n,{control:a.control,name:"gender",render:({field:s})=>e.jsxs(t,{children:[e.jsx(o,{children:"I am"}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"male",checked:s.value==="male",onChange:()=>s.onChange("male"),className:"rounded-full border-primary"}),e.jsx("span",{children:"Male"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",value:"female",checked:s.value==="female",onChange:()=>s.onChange("female"),className:"rounded-full border-primary"}),e.jsx("span",{children:"Female"})]})]})}),e.jsx(c,{})]})}),e.jsx(j,{type:"submit",className:"w-full",disabled:r,children:r?"Logging in…":"Log in"}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("span",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-border"})}),e.jsx("span",{className:"relative flex justify-center text-xs uppercase text-muted-foreground",children:"or"})]}),e.jsx(j,{type:"button",variant:"outline",className:"w-full",disabled:r||u,onClick:async()=>{x(!0);try{const s=a.watch("gender");(await b(s==="male"||s==="female"?s:void 0)).success&&d("/dsa/dashboard",{replace:!0})}finally{x(!1)}},children:u?"Signing in…":"Sign in with Google"})]})}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(w,{to:"/dsa/register",className:"text-primary hover:underline",children:"Register"})]})]})})}export{A as default};
